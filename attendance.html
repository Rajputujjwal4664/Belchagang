<script>
  // Yeh line redeclaration se bachaata hai
  var currentUser = currentUser || localStorage.getItem("loggedInUsername");
  var approvedList = [];

  try {
    approvedList = JSON.parse(localStorage.getItem("approvedMembers") || "[]");
  } catch (e) {
    console.error("❌ JSON parse failed:", e);
  }

  console.log("Logged in user:", currentUser);
  console.log("Approved list:", approvedList);

  const isApproved = approvedList.some(member =>
    member.username?.toLowerCase() === currentUser?.toLowerCase()
  );

  console.log("Is approved:", isApproved);

  if (!isApproved) {
    alert("🚫 Aapka membership abhi tak approve nahi hua. Yeh page locked hai.");
    window.location.href = "home.html";
  }
</script>
